#include <metal_stdlib>
using namespace metal;

namespace colormap {
namespace IDL {
namespace CB_PRGn {

float colormap_red(float x) {
	if (x < 0.09963276982307434) {
		return 5.56064615384614E+02 * x + 6.34200000000000E+01;
	} else if (x < 0.4070911109447479) {
		return ((-1.64134573262743E+03 * x + 1.26126075878571E+03) * x + 8.30228593437549E+01) * x + 9.96536529647110E+01;
	} else if (x < 0.5013306438922882) {
		return 1.64123076923114E+02 * x + 1.64926153846145E+02;
	} else if (x < 0.9049346148967743) {
		return ((((-4.17783076764345E+04 * x + 1.55735420068591E+05) * x - 2.27018068370619E+05) * x + 1.61149115838926E+05) * x - 5.60588504546212E+04) * x + 7.93919652573346E+03;
	} else {
		return -2.67676923076906E+02 * x + 2.68590769230752E+02;
	}
}

float colormap_green(float x) {
	if (x < 0.1011035144329071) {
		return 4.30627692307691E+02 * x - 1.56923076923038E-01;
	} else if (x < 0.5013851821422577) {
		return ((2.21240993583109E+02 * x - 7.23499016773187E+02) * x + 8.74292145995924E+02) * x - 3.78460594811949E+01;
	} else {
		return ((((-8.82260255008935E+03 * x + 3.69735516719018E+04) * x - 5.94940784200438E+04) * x + 4.54236515662453E+04) * x - 1.66043372157228E+04) * x + 2.59449114260420E+03;
	}
}

float colormap_blue(float x) {
	if (x < 0.50031378865242) {
		return ((((1.32543265346288E+04 * x - 1.82876583834065E+04) * x + 9.17087085537958E+03) * x - 2.45909850441496E+03) * x + 7.42893247681885E+02) * x + 7.26668497072812E+01;
	} else if (x < 0.609173446893692) {
		return -3.50141636141726E+02 * x + 4.22147741147797E+02;
	} else {
		return ((1.79776073728688E+03 * x - 3.80142452792079E+03) * x + 2.10214624189039E+03) * x - 6.74426111651015E+01;
	}
}

float4 colormap(float x) {
	float r = clamp(colormap_red(x) / 255.0, 0.0, 1.0);
	float g = clamp(colormap_green(x) / 255.0, 0.0, 1.0);
	float b = clamp(colormap_blue(x) / 255.0, 0.0, 1.0);
	return float4(r, g, b, 1.0);
}

} // namespace CB_PRGn
} // namespace IDL
} // namespace colormap
