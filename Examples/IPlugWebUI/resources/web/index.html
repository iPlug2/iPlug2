<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style type="text/css">
        @font-face {
          font-family: 'Roboto';
          src: url('Roboto-Regular.ttf') format('ttf');
          font-weight: 400; /* Normal */
          font-style: normal;
        }

        * {
          -webkit-touch-callout: none;
          -webkit-user-select: none;
        }
      
        p, h1 {
          pointer-events: none;
        }
        
        body {
          font-family: 'Roboto', sans-serif;
          overflow: hidden;
          -webkit-overflow-scrolling: touch;
          background-color: #000; /* Change this to your desired color */
        }
        
        .midi-keyboard {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px; /* Set the height of the MIDI keyboard as needed */
            background-color: #2b2b2b; /* Add a background color for visualization */
        }

        .parent-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
        }

        .parent {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            margin: 20px;
            padding: 20px;
            background-color: #1d1a1f;
            border-radius: 20px;
            border: 2px solid white;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .product-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #fff;
            pointer-events: none;
        }

        knob-control {
            flex: 0 0 auto;
            width: 40px;
            height: 100px;
            padding: 10px;
            text-align: center;
            user-select: none;
            white-space: nowrap;
        }

        .switches {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-top: 20px;
        }
        
        .switch-placeholder {
            flex: 0 0 auto;
            width: 40px;
            padding: 10px;
        }
      </style>
      <script type="module" src="custom-button.js"></script>
      <script type="module" src="combo-box.js"></script>
      <script type="module" src="color-picker-button.js"></script>
      <script type="module" src="knob-control.js"></script>
      <script type="module" src="vertical-slider.js"></script>
      <script type="module" src="midi-keyboard.js"></script>
      <script type="module" src="slide-switch.js"></script>
      <script type="module" src="vu-meter.js"></script>
      <script src="script.js"></script>
      <script>
        function midiNoteToBytes(channel, pitch, velocity) {
          if (channel < 0 || channel > 15) {
            throw new Error('Invalid MIDI channel. Must be between 0 and 15.');
          }
          if (pitch < 0 || pitch > 127) {
            throw new Error('Invalid MIDI pitch. Must be between 0 and 127.');
          }
          if (velocity < 0 || velocity > 127) {
            throw new Error('Invalid MIDI velocity. Must be between 0 and 127.');
          }

          const noteOnStatus = 0x90 | (channel & 0x0F);
          const noteOffStatus = 0x80 | (channel & 0x0F);

          return {
            status: velocity > 0 ? noteOnStatus : noteOffStatus,
            data1: pitch,
            data2: velocity
          };
        }

        function SendTestBinaryData() {
          let uint8 = new Uint8Array([0, 0, 0, 0]);
          uint8.fill(4, 1, 3);
          var bin = String.fromCharCode.apply(null, uint8);
          SAMFUI(3, -1, window.btoa(bin));
        }
        
        function OnParamChange(param, value) {
          if (param == 0) {
          }
        }
        
        function OnControlChange(ctrlTag, value) {
          if (ctrlTag == 0) {
          }
        }
        
        function OnMessage(msgTag, dataSize, data) {
          if (msgTag == -1) {
            document.getElementById("TextReadout").value = data;
          }
        }
        
        function OnMouseDown() {
          console.log("OnMouseDown")
          SAMFUI(4);
        }
      
        function OnMouseUp() {
          console.log("OnMouseUp")
          SAMFUI(5);
        }
      
        function onLoad() {
        }
      </script>
</head>
<body onload="onLoad()">
  <div class="parent-container">
    <div class="parent">
      <div class="product-title">Neural Amp Modeler</div>
      <div class="knobs">
        <knob-control label="Input"></knob-control>
        <knob-control label="Gate" units="dB"></knob-control>
        <knob-control label="Bass"></knob-control>
        <knob-control label="Middle"></knob-control>
        <knob-control label="Treble"></knob-control>
        <knob-control label="Output"></knob-control>
      </div>
      <div class="switches">
        <div class="switch-placeholder"></div>
        <slide-switch label="Gate" handle-color="#000"></slide-switch>
        <div class="switch-placeholder"></div>
        <slide-switch label="EQ" handle-color="#000"></slide-switch>
        <div class="switch-placeholder"></div>
        <div class="switch-placeholder"></div>
      </div>
    </div>
  </div>
  <script>
      function handleNoteOn(note, velocity) {
          console.log('Note:', note, 'Velocity:', velocity);
          
          bytes = midiNoteToBytes(0, note, velocity);
          SMMFUI(bytes.status, bytes.data1, bytes.data2);
      }
  </script>
</body>
</html>
